<!DOCTYPE html>
<html>
  <head>
    <script>
        /*
      var respuesta = false;
      while (!respuesta) {
        respuesta = confirm(
          "Página en mantenimiento, favor de intentar después de 11:30 am");
      }
      window.location.href = "index.html";*/
    </script>

    <title>inicio</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta
      name="keywords"
      content="Augment Responsive web template, Bootstrap Web Templates, Flat Web Templates, Android Compatible web template, 
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design"
    />
    <script type="application/x-javascript">
      addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); }
    </script>
    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <!-- Custom CSS -->
    <link href="css/style.css" rel="stylesheet" type="text/css" />

    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
      integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/"
      crossorigin="anonymous"
    />

    <!-- Graph CSS -->
    <link href="css/font-awesome.css" rel="stylesheet" />
    <!-- jQuery -->
    <link
      href="//fonts.googleapis.com/css?family=Roboto:700,500,300,100italic,100,400"
      rel="stylesheet"
      type="text/css"
    />
    <!-- lined-icons -->
    <link rel="stylesheet" href="css/icon-font.min.css" type="text/css" />
    <!-- //lined-icons -->
    <script src="js/jquery-1.10.2.min.js"></script>
    <!--clock init-->
  </head>
  <body>
    <!--/login-->

    <div class="error_page">
      <!--/login-top-->

      <div class="error-top">
        <img src="images/logo_patrimonio_v2.png" width="40%" />
        <div class="login">
          <h3 class="inner-tittle t-inner">Patrimonio cultural</h3>

          <form id="formulario" action="login.php" method="post">
            <input
              type="text"
              id="txtEmail"
              name="txtEmail"
              class="text"
              value="Correo electrónico"
              onfocus="this.value = '';"
              onblur="if (this.value == '') {this.value = 'E-mail address';}"
            />
            <input
              id="txtPassword"
              name="txtPassword"
              type="password"
              value="Contraseña"
              onfocus="this.value = '';"
              onblur="if (this.value == '') {this.value = 'Password';}"
            />
            <div class="submit">
              <input
                type="submit"
                name="loginButton"
                onclick="myFunction()"
                value="Entrar"
              /><input
                type="submit"
                name="recuperarPassButton"
                value="Recuperar contraseña"
              />
            </div>
            <div class="clearfix"></div>

            <div class="new">
              <p>
                <label class="checkbox11"
                  ><input
                    type="checkbox"
                    name="checkbox"
                    id="recuperarPass"
                  /><i class="far fa-square"></i>¿Olvidaste tu
                  contraseña?</label
                >
              </p>

              <div class="clearfix"></div>
            </div>
          </form>
        </div>
      </div>

      <!--//login-top-->
    </div>

    <!--//login-->
    <!--footer section start-->
    <div class="footer"></div>
    <!--footer section end-->
    <div class="login_b">
      <div class="logos">
        <img src="images/logos_foot.png" width="300" />
      </div>
      <p class="">
        &copy; 2019 Patrimonio cultural del Estado de México . Todos los
        derechos reservados
      </p>
    </div>
    <!--/404-->
    <!--js -->
    <script src="js/jquery.nicescroll.js"></script>
    <script src="js/scripts.js"></script>
    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

    <script type="application/x-javascript">
      $(document).ready(function() {
          $('#recuperarPass').change(function() {
              var casilla = $(this).parent().children("i");
              if(this.checked) {
                  casilla.removeClass("fa-square");
                  casilla.addClass("fa-check-square");
                  $('input[name="txtPassword"]').css("display", "none");
                  $('input[name="loginButton"]').css("display", "none");
                  $('input[name="recuperarPassButton"]').css("display", "block");
                  $("#formulario").attr("onsubmit", "return recuperarCuenta();");
              } else {
                  casilla.removeClass("fa-check-square");
                  casilla.addClass("fa-square");
                  $('input[name="txtPassword"]').css("display", "block");
                  $('input[name="loginButton"]').css("display", "block");
                  $('input[name="recuperarPassButton"]').css("display", "none");
                  $("#formulario").removeAttr("onsubmit");
              }
          });
      });

      function recuperarCuenta(){
          var campo = $('input[name="txtEmail"]').val();
          if(validateEmail(campo)){
              alert("enviando: " + campo);
              $.ajax({
                  method: "POST",
                  url: "contrasena_olvidada.php",
                  scriptCharset: "utf-8" ,
                  contentType: "application/x-www-form-urlencoded; charset=UTF-8",
                  data: { mail: campo}
              }).done(function( msg ) {
                  alert(msg);
              });
          } else {
              alert("inválido: " + campo);
          }
          return false;
      }

      function validateEmail(email) {
          var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
          return re.test(email);
      }
    </script>
  </body>
</html>
